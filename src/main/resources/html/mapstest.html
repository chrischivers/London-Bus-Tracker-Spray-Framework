<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Bus Route UI</title>

    <style type="text/css">
        html, body, #map_canvas {
            width: 100%;
            height: 90%;
            margin: 0;
            padding: 0;
        }

    </style>

    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBxCYp9RWcbhuPg0nLWFzJhuPbECQYOqBw"></script>
    <script src="https://code.jquery.com/jquery.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="js/markerAnimate.js"></script>
    <script src="js/SlidingMarker.min.js"></script>

    <script>
        //SlidingMarker.initializeGlobally();
        var marker, map;
        function initialize() {
            var myLatlng = new google.maps.LatLng(32.520204, 34.937258);
            var mapOptions = {
                zoom: 4,
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }
            map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);


            //marker = new google.maps.Marker({
            marker = new SlidingMarker({
                position: myLatlng,
                map: map,
                title: 'I\m sliding marker',
                duration: 2000
            });

        }
        $(function () {
            initialize();

        });


        function setNewLocation(lat, lng, duration) {
            var newLatlng = new google.maps.LatLng(lat, lng);
            var newduration = (parse);
            marker.setDuration(newduration);
            marker.setPosition(newLatlng)
        }

        $(document).ready(function () {
            $("button").click(function () {
                $.post("getPosition.asp",
                        {
                            name: "bus_reg"
                        },
                        function (data, status) {
                            if (data != "NA") {
                                var res = data.split(",");
                                setNewLocation(res[1], res[2], res[3]);
                            }

                        });
                // setTimeout(arguments.callee, 1000);
            });
        });
    </script>
</head>
<body>
<div id="map_canvas"></div>
<button>Send an HTTP POST request to a page and get the result back</button>
</body>
</html>