<!DOCTYPE html>
<HTML>
<HEAD>
    <TITLE>TFL Prediction</TITLE>
    <SCRIPT>
        var routeIdCombo = document.getElementById("routeIDCombo");
        window.onload =loadRouteIDs;
        routeIdCombo.onchange= loadDirections;

        function loadRouteIDs()
        {
            var xmlhttp =new XMLHttpRequest();
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    var parsedJson = JSON.parse(xmlhttp.responseText);
                    var routeArray = parsedJson.routeList;

                    for(var i = 0; i < routeArray.length; i++) {
                        var opt = routeArray[i];
                        var el = document.createElement("option");
                        el.textContent = opt;
                        el.value = opt;
                        routeIdCombo.appendChild(el);
                    }
                }
            };
            xmlhttp.open("GET","route_list_request.asp",true);
            xmlhttp.send();
        }

        function loadDirections(routeID) {
            var xmlhttp =new XMLHttpRequest();
                xmlhttp.onreadystatechange=function()
                {
                    if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    {
                        var parsedJson = JSON.parse(xmlhttp.responseText);
                        var routeArray = parsedJson.routeList;

                        for(var i = 0; i < routeArray.length; i++) {
                            var opt = routeArray[i];
                            var el = document.createElement("option");
                            el.textContent = opt;
                            el.value = opt;
                            routeIdCombo.appendChild(el);
                        }
                    }
                };
            xmlhttp.open("GET","direction_list_request.asp?route=" + routeID,true);
            xmlhttp.send();

        }
    </SCRIPT>

</HEAD>
<BODY style="font-family: sans-serif">

<fieldset>
    <legend>TFL Bus Prediction</legend>
    <br/>
    RouteID: <select name="routeIDCombo" id="routeIDCombo"></select>
    DirectionID: <select name="directionIDCombo" id="directionIDCombo"></select>
</fieldset>
</BODY>
</HTML>